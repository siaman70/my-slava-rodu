<div class="partial navigation partial-navigation">
  {{- partial "source.html" (dict "siteparams" $.Site.Params "file" "partials/navigation.html") -}}
 
<!-- from sitemap.html in bkleinen.github.io -->
current page: {{ .Page }}
<ul>
{{ template "complete_navigation" (dict  "currentPage" . "navPage" .Site.Home ) }}
</ul>
<!-- further attributes:
  <small>{{.Title}}{{.RelPermalink }} ({{.Kind}}- {{ .Weight}})</a> ---
{{.Type }},{{.LinkTitle }},{{.Name }},{{.Title }}</small> -->
</div>

{{ define "complete_navigation" }}
  {{ $navPage := .navPage }}
  {{ $currentPage := .currentPage }}
  

  {{ $active_class := cond (eq $currentPage $navPage) "active" "" }}
  {{ $active_class }}
  bla
  {{ $currentPage }}
  {{ $navPage }}
    {{ with $navPage }} 
      {{ if .Pages }}
      <li>
        {{.RelPermalink }}:</li>
          <ul>
            {{ template "menu_item" (dict "page" . "active" $active_class )}}
          {{ range sort .Pages "Kind"}}
                {{ template "complete_navigation" (dict  "currentPage" $currentPage "navPage" . ) }}
          {{ end }}
          </ul>
      {{ else }}
        {{ template "menu_item" (dict "page" . "active" $active_class ) }}
      {{ end }}
    {{ end }}
{{ end }}

{{ define "menu_item" }}
{{ $active_class := .active}}

{{ with .page }}
<li class = "{{$active_class}}"><a href= "{{ .Permalink }}">
  {{.Title }}</a></li>
{{ end }}
{{ end }}
 